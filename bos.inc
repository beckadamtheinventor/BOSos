define ti? ti
namespace ti
; TI84+CE Boot Calls
;-----------------------------------
?boot.GetHardwareVers      := 0000084h
?boot.GetKeyID             := 0000088h
?boot.GetBootVerMinor      := 000008Ch
?boot.GetBootVerBuild      := 0000090h
?dbgout                    := 0000094h
?_longjmp                  := 0000098h
?_memchr                   := 000009Ch
?_memcmp                   := 00000A0h
?_memcpy                   := 00000A4h
?_memmove                  := 00000A8h
?_memset                   := 00000ACh
?_memclear                 := 00000B0h
?printf                    := 00000B4h
?_setjmp                   := 00000B8h
?sprintf                   := 00000BCh
?_strcat                   := 00000C0h
?_strchr                   := 00000C4h
?_strcmp                   := 00000C8h
?_strcpy                   := 00000CCh
?_strcspn                  := 00000D0h
?_strlen                   := 00000D4h
?_strncat                  := 00000D8h
?_strncmp                  := 00000DCh
?_strncpy                  := 00000E0h
?_strpbrk                  := 00000E4h
?_strrchr                  := 00000E8h
?_strspn                   := 00000ECh
?_strstr                   := 00000F0h
?strtok                    := 00000F4h
?ret                       := 00000F8h
?_bldiy                    := 00000FCh
?_bshl                     := 0000100h
?_bshru                    := 0000104h
?_bstiy                    := 0000108h
?_bstix                    := 000010Ch
?_case                     := 0000110h
?_case16                   := 0000114h
?_case16D                  := 0000118h
?_case24                   := 000011Ch
?_case24D                  := 0000120h
?_case8                    := 0000124h
?_case8D                   := 0000128h
?_frameset                 := 000012Ch
?_frameset0                := 0000130h
?_iand                     := 0000134h
?_icmpzero                 := 0000138h
?_idivs                    := 000013Ch
?_idivu                    := 0000140h
?_idvrmu                   := 0000144h
?_ildix                    := 0000148h
?_ildiy                    := 000014Ch
?_imul_b                   := 0000150h
?_imulu                    := 0000154h
?_imuls                    := 0000158h
?_indcall                  := 000015Ch
?_ineg                     := 0000160h
?_inot                     := 0000164h
?_ior                      := 0000168h
?_irems                    := 000016Ch
?_iremu                    := 0000170h
?_ishl                     := 0000174h
?_ishl_b                   := 0000178h
?_ishrs                    := 000017Ch
?_ishrs_b                  := 0000180h
?_ishru                    := 0000184h
?_ishru_b                  := 0000188h
?_istix                    := 000018Ch
?_istiy                    := 0000190h
?_itol                     := 0000194h
?_ixor                     := 0000198h
?_ladd                     := 000019Ch
?_ladd_b                   := 00001A0h
?_land                     := 00001A4h
?_lcmps                    := 00001A8h
?_lcmpu                    := 00001ACh
?_lcmpzero                 := 00001B0h
?_ldivs                    := 00001B4h
?_ldivu                    := 00001B8h
?_ldvrmu                   := 00001BCh
?_lldix                    := 00001C0h
?_lldiy                    := 00001C4h
?_lmuls                    := 00001C8h
?_lmulu                    := 00001CCh
?_lneg                     := 00001D0h
?_lnot                     := 00001D4h
?_lor                      := 00001D8h
?_lrems                    := 00001DCh
?_lremu                    := 00001E0h
?_lshl                     := 00001E4h
?_lshrs                    := 00001E8h
?_lshru                    := 00001ECh
?_lstix                    := 00001F0h
?_lstiy                    := 00001F4h
?_lsub                     := 00001F8h
?_lxor                     := 00001FCh
?_sand                     := 0000200h
?_scmpzero                 := 0000204h
?_sdivs                    := 0000208h
?_sdivu                    := 000020Ch
?_seqcase                  := 0000210h
?_seqcaseD                 := 0000214h
?_setflag                  := 0000218h
?_sldix                    := 000021Ch
?_sldiy                    := 0000220h
?_smuls                    := 0000224h
?_smulu                    := 0000228h
?_sneg                     := 000022Ch
?_snot                     := 0000230h
?_sor                      := 0000234h
?_srems                    := 0000238h
?_sremu                    := 000023Ch
?_sshl                     := 0000240h
?_sshl_b                   := 0000244h
?_sshrs                    := 0000248h
?_sshrs_b                  := 000024Ch
?_sshru                    := 0000250h
?_sshru_b                  := 0000254h
?_sstix                    := 0000258h
?_sstiy                    := 000025Ch
?_stoi                     := 0000260h
?_stoiu                    := 0000264h
?_sxor                     := 0000268h
?_fppack                   := 000026Ch
?_fadd                     := 0000270h
?_fcmp                     := 0000274h
?_fdiv                     := 0000278h
?_ftol                     := 000027Ch
?_ultof                    := 0000280h
?_ltof                     := 0000284h
?_fmul                     := 0000288h
?_fneg                     := 000028Ch
?_fsub                     := 0000290h
?FLTMAX                    := 0000294h
?sqrtf                     := 0000298h
?_frbtof                   := 000029Ch
?_frftob                   := 00002A0h
?_frftoub                  := 00002A4h
?_frftoi                   := 00002A8h
?_frftoui                  := 00002ACh
?_frftos                   := 00002B0h
?_frftous                  := 00002B4h
?_fritof                   := 00002B8h
?_fruitof                  := 00002BCh
?_frstof                   := 00002C0h
?_frubtof                  := 00002C4h
?_frustof                  := 00002C8h
?ResetPorts                := 00002CCh
?ChkIfOSInterruptAvailable := 00002D0h
?WriteFlashByte            := 00002D4h
?EraseFlash                := 00002D8h
?EraseFlashSector          := 00002DCh
?WriteFlash                := 00002E0h
?WriteFlashByteDuplicate   := 00002E4h
?WriteFlashA               := 00002E8h
?CleanupCertificate        := 00002ECh
?ClrHeap                   := 00002F0h
?CpyToHeap                 := 00002F4h
?ChkHeapTop                := 00002F8h
?ExecuteInRAM              := 00002FCh
?ExecuteInRAMDup           := 0000300h
?ExecuteInRAMDup2          := 0000304h
?ChkCertSpace              := 0000308h
?GetFieldSizeFromType      := 000030Ch
?FindFirstCertField        := 0000310h
?FindField                 := 0000314h
?FindNextField             := 0000318h
?GetCertificateEnd         := 000031Ch
?GetFieldSizeFromType_     := 0000320h
?GetFieldFromSize          := 0000324h
?NextFieldFromSize         := 0000328h
?NextFieldFromType         := 000032Ch
?GetOffsetToNextField      := 0000330h
?WriteFlashUnsafe          := 0000334h
?boot.GetCertCalcString    := 0000338h
?boot.GetCertCalcID        := 000033Ch
?GetSerial                 := 0000340h
;                          equ 0000344h
?Mult16By8                 := 0000348h
?Div16By8                  := 000034Ch
?Div16By16                 := 0000350h
?Div32By16                 := 0000354h
?CmpStr                    := 0000358h
?boot.Sha256Init           := 000035Ch
?boot.Sha256Part           := 0000360h
?boot.Sha256Hash           := 0000364h
?FindAppHeaderSubField     := 0000368h
;                          equ 000036Ch
?FindAppHeaderTimestamp    := 0000370h
?boot.ClearVRAM            := 0000374h
?boot.PutS                 := 0000378h
?PutSpinner                := 000037Ch
?boot.GetLFontPtr          := 0000380h
?boot.InitializeHardware   := 0000384h
?boot.TurnOffHardware      := 0000388h
?MakeColCmd                := 000038Ch
?boot.NewLine              := 0000390h
?PutBootVersion            := 0000394h
?DrawSectorProtectionTable := 0000398h
?boot.Set6MHzMode          := 000039Ch
?boot.Set48MHzMode         := 00003A0h
?boot.Set6MHzModeI         := 00003A4h
?boot.Set48MHzModeI        := 00003A8h
?CheckHardware             := 00003ACh
?GetBatteryStatus          := 00003B0h
?Delay10ms                 := 00003B4h
?DelayTenTimesAms          := 00003B8h
;                          equ 00003BCh
;                          equ 00003C0h
;                          equ 00003C4h
;                          equ 00003C8h
?usb_IsBusPowered          := 00003CCh
?KeypadScan                := 00003D0h
?KeypadScanFull            := 00003D4h
;_ret                      equ 00003D8h
;_ret                      equ 00003DCh
?MarkOSInvalid             := 00003E0h
?usb_BusPowered            := 00003E4h
?usb_SelfPowered           := 00003E8h
;                          equ 00003ECh
;                          equ 00003F0h
;                          equ 00003F4h
;                          equ 00003F8h
?usb_SetDeviceB            := 00003FCh
;                          equ 0000400h
?usb_DMACXReadNext         := 0000404h
?usb_DMACXWrite            := 0000408h
?usb_DMACXRead             := 000040Ch
?usb_DMACXWriteNext        := 0000410h
?usb_DMACXWriteCheck       := 0000414h
;                          equ 0000418h
;                          equ 000041Ch
;                          equ 0000420h
;                          equ 0000424h
;                          equ 0000428h
;                          equ 000042Ch
;                          equ 0000430h
;                          equ 0000434h
;                          equ 0000438h
;                          equ 000043Ch
;                          equ 0000440h
;                          equ 0000444h
;                          equ 0000448h
;                          equ 000044Ch
;                          equ 0000450h
;                          equ 0000454h
;                          equ 0000458h
;                          equ 000045Ch
?MarkOSValid               := 0000460h
;                          equ 0000464h
;                          equ 0000468h
;                          equ 000046Ch
;                          equ 0000470h
;                          equ 0000474h
;                          equ 0000478h
;                          equ 000047Ch
;                          equ 0000480h
;                          equ 0000484h
;                          equ 0000488h
;                          equ 000048Ch
;                          equ 0000490h
;                          equ 0000494h
;                          equ 0000498h
;                          equ 000049Ch
;                          equ 00004A0h
;                          equ 00004A4h
?usb_SetDMAState           := 00004A8h
?usb_DMATransfer           := 00004ACh
?usb_DMACXTransferWait     := 00004B0h
;                          equ 00004B4h
;                          equ 00004B8h
?usb_ResetFIFOS            := 00004BCh
;                          equ 00004C0h
;                          equ 00004C4h
;                          equ 00004C8h
;                          equ 00004CCh
;                          equ 00004D0h
;                          equ 00004D4h
;                          equ 00004D8h
;                          equ 00004DCh
;                          equ 00004E0h
;                          equ 00004E4h
;                          equ 00004E8h
;                          equ 00004ECh
?usb_ResetTimer            := 00004F0h
?usb_DisableTimer          := 00004F4h
?usb_EnableTimer           := 00004F8h
;                          equ 00004FCh
;                          equ 0000500h
;                          equ 0000504h
;                          equ 0000508h
;                          equ 000050Ch
;                          equ 0000510h
;                          equ 0000514h
;                          equ 0000518h
;                          equ 000051Ch
?boot.SetTimersControl     := 0000520h
?boot.GetTimersControl     := 0000524h
?boot.SetTimersInterrupt   := 0000528h
?boot.GetTimersInterrupt   := 000052Ch
?boot.SetTimersInterruptM  := 0000530h
?boot.GetTimersInterruptM  := 0000534h
?boot.SetTimer1Counter     := 0000538h
?boot.GetTimer1Counter     := 000053Ch
?boot.SetTimer1ReloadValue := 0000540h
?boot.GetTimer1ReloadValue := 0000544h
?boot.SetTimer1MatchValue1 := 0000548h
?boot.GetTimer1MatchValue1 := 000054Ch
?boot.SetTimer1MatchValue2 := 0000550h
?boot.GetTimer1MatchValue2 := 0000554h
?boot.SetTimer2Counter     := 0000558h
?boot.GetTimer2Counter     := 000055Ch
?boot.SetTimer2ReloadValue := 0000560h
?boot.GetTimer2ReloadValue := 0000564h
?boot.SetTimer2MatchValue1 := 0000568h
?boot.GetTimer2MatchValue1 := 000056Ch
?boot.SetTimer2MatchValue2 := 0000570h
?boot.GetTimer2MatchValue2 := 0000574h
?CheckIfEmulated           := 0000578h
?boot.GetOnInt             := 000057Ch
?boot.RTCIntHandler        := 0000580h
?boot.RTCInitialize        := 0000584h
?boot.RTCGetInitStatus     := 0000588h
?boot.RTCEnable            := 000058Ch
?boot.RTCDisable           := 0000590h
?boot.RTCSet24Hours        := 0000594h
;                          equ 0000598h
;                          equ 000059Ch
?boot.RTCAckAlarmInt       := 00005A0h
;                          equ 00005A4h
?boot.RTCWriteTime         := 00005A8h
?boot.RTCGetTime12Hour     := 00005ACh
?boot.RTCGetTime           := 00005B0h
?boot.RTCSetTime           := 00005B4h
?boot.RTCGetAlarm          := 00005B8h
?boot.RTCSetAlarmSafe      := 00005BCh
?boot.RTCCheckAlarmInt     := 00005C0h
?boot.RTCSetAlarmInt       := 00005C4h
?boot.RTCIsAfternoon       := 00005C8h
?boot.RTCGetDay            := 00005CCh
?boot.RTCSetAlarmIntSafe   := 00005D0h
?boot.RTCSetAlarm          := 00005D4h
?boot.RTCEnableInt         := 00005D8h
?boot.RTCDisableInt        := 00005DCh
?boot.RTCSetCallback       := 00005E0h
?boot.RTCResetTimeStruct   := 00005E4h
;                          equ 00005E8h
?boot.RTCSetFlags          := 00005ECh
;                          equ 00005F0h
?CheckEmulationBit         := 00005F4h
?usb_SetDMAAddress         := 00005F8h
;                          equ 00005FCh
?boot.SectorsBegin         := 0000600h
;                          equ 0000604h
?usb_InEndpointClrStall    := 0000608h
?usb_InEndpointSetStall    := 000060Ch
?usb_InEndpointClrReset    := 0000610h
?usb_InEndpointSetReset    := 0000614h
?usb_InEndpointSendZlp     := 0000618h
?usb_OutEndpointClrStall   := 000061Ch
?usb_OutEndpointSetStall   := 0000620h
?usb_OutEndpointClrReset   := 0000624h
?usb_OutEndpointSetReset   := 0000628h
?usb_SetFifoMap            := 000062Ch
?usb_SetEndpointConfig     := 0000630h
?usb_ClrEndpointConfig     := 0000634h
?usb_SetFifoConfig         := 0000638h
;                          equ 000063Ch

end namespace

define bos? bos
namespace bos
;table:
;; $=0020108h
?handle_boot                     := $20108
?handle_int                      := $2010C
?handle_rst10                    := $20110
?handle_rst18                    := $20114
?handle_rst20                    := $20118
?handle_rst28                    := $2011C
?handle_rst30                    := $20120
;; $=0020128
;; $=002012Ch
;;-------------------------------------------------------------------------------
;; OS functions
;;-------------------------------------------------------------------------------
?sys_MemSet                      := $20124
?sys_AddHLAndA                   := $20128
?sys_HLToString                  := $2012C
?kb_Scan                         := $20130
?kb_AnyKey                       := $20134
?sys_GetKey                      := $20138
?sys_WaitKey                     := $2013C
;DONOTHING                       := $20140
;DONOTHING                       := $20144
;DONOTHING                       := $20148
;DONOTHING                       := $2014C
;DONOTHING                       := $20150
;DONOTHING                       := $20154
;DONOTHING                       := $20158
;DONOTHING                       := $2015C
;DONOTHING                       := $20160
?flash_unlock                    := $20164
?flash_lock                      := $20168
?sys_WriteFlash                  := $2016C
?sys_EraseFlashSector            := $20170
;DONOTHING                       := $20174
;DONOTHING                       := $20178
;DONOTHING                       := $2017C
;DONOTHING                       := $20180
;DONOTHING                       := $20184
;DONOTHING                       := $20188
;DONOTHING                       := $2018C
;DONOTHING                       := $20190
;DONOTHING                       := $20194
;DONOTHING                       := $20198
;DONOTHING                       := $2019C
;DONOTHING                       := $201A0
;
;;-------------------------------------------------------------------------------
;; string functions
;;-------------------------------------------------------------------------------
?strlen                          := $201A4
?strset                          := $201A8
?strcpy                          := $201AC
?strcmp                          := $201B0
?strupper                        := $201B4
?strlower                        := $201B8
?strncpy                         := $201BC
?strncmp                         := $201C0
;DONOTHING                       := $201C4
;DONOTHING                       := $201C8
;DONOTHING                       := $201CC
;DONOTHING                       := $201D0
;DONOTHING                       := $201D4
;DONOTHING                       := $201D8
;DONOTHING                       := $201DC
;DONOTHING                       := $201E0
;DONOTHING                       := $201E4
;DONOTHING                       := $201E8
;DONOTHING                       := $201EC
;DONOTHING                       := $201F0
;DONOTHING                       := $201F4
;DONOTHING                       := $201F8
;DONOTHING                       := $201FC
;DONOTHING                       := $20200
;DONOTHING                       := $20204
;DONOTHING                       := $20208
;DONOTHING                       := $2020C
;DONOTHING                       := $20210
;DONOTHING                       := $20214
;DONOTHING                       := $20218
;DONOTHING                       := $2021C
;DONOTHING                       := $20220
;
;;-------------------------------------------------------------------------------
;; VAT and Filesystem functions
;;-------------------------------------------------------------------------------
?fs_BuildVAT                     := $20224
?fs_FindSym                      := $20228
?fs_CreateFile                   := $2022C
?fs_GetC                         := $20230
?fs_PutC                         := $20234
?fs_Open                         := $20238
?fs_Read                         := $2023C
?fs_Write                        := $20240
?fs_Tell                         := $20244
?fs_Seek                         := $20248
?fs_Delete                       := $2024C
;DONOTHING                       := $20250
;DONOTHING                       := $20254
;DONOTHING                       := $20258
;DONOTHING                       := $2025C
;DONOTHING                       := $20260
;DONOTHING                       := $20264
;DONOTHING                       := $20268
;DONOTHING                       := $2026C
;DONOTHING                       := $20270
;DONOTHING                       := $20274
;DONOTHING                       := $20278
;DONOTHING                       := $2027C
;DONOTHING                       := $20280
;DONOTHING                       := $20284
;DONOTHING                       := $20288
;DONOTHING                       := $2028C
;DONOTHING                       := $20290
;DONOTHING                       := $20294
;DONOTHING                       := $20298
;DONOTHING                       := $2029C
;DONOTHING                       := $202A0
;
;;-------------------------------------------------------------------------------
;; built-in graphics functions
;;-------------------------------------------------------------------------------
?gfx_Set8bpp                     := $202A4
?gfx_Set16bpp                    := $202A8
?gfx_InitStdPalette              := $202AC
;DONOTHING                       := $202B0
;DONOTHING                       := $202B4
;DONOTHING                       := $202B8
?gfx_PrintString                 := $202BC
?gfx_LcdClear                    := $202C0
?gfx_BufClear                    := $202C4
?gfx_BlitBuffer                  := $202C8
?gfx_PrintUInt                   := $202CC
?gfx_Compute                     := $202D0
?gfx_HorizLine                   := $202D4
?gfx_VertLine                    := $202D8
?gfx_Rectangle                   := $202DC
?gfx_FillRectangle               := $202E0
?gfx_Sprite                      := $202E4
?gfx_PrintChar                   := $202E8
?gfx_NextLine                    := $202EC
;DONOTHING                       := $202F0
;DONOTHING                       := $202F4
;DONOTHING                       := $202F8
;DONOTHING                       := $202FC
;DONOTHING                       := $20300
;DONOTHING                       := $20304
;DONOTHING                       := $20308
;DONOTHING                       := $2030C
;DONOTHING                       := $20310
;DONOTHING                       := $20314
;DONOTHING                       := $20318
;DONOTHING                       := $2031C
;DONOTHING                       := $20320
;
;;-------------------------------------------------------------------------------
;; C accessible filesystem functions
;;-------------------------------------------------------------------------------
?c_CloseAll                      := $20324
?c_Open                          := $20328
;DONOTHING                       := $2032C
?c_Close                         := $20330
?c_Read                          := $20334
?c_Write                         := $20338
?c_GetC                          := $2033C
?c_PutC                          := $20340
?c_Delete                        := $20344
;DONOTHING                       := $20348
?c_Seek                          := $2034C
?c_Resize                        := $20350
?c_IsArchived                    := $20354
?c_SetArchiveStatus              := $20358
?c_Tell                          := $2035C
?c_Rewind                        := $20360
?c_GetSize                       := $20364
;DONOTHING                       := $20368
;DONOTHING                       := $2036C
;DONOTHING                       := $20370
?c_Rename                        := $20374
;DONOTHING                       := $20378
;DONOTHING                       := $2037C
;DONOTHING                       := $20380
;DONOTHING                       := $20384
;DONOTHING                       := $20388
;DONOTHING                       := $2038C
;DONOTHING                       := $20390
;DONOTHING                       := $20394
;DONOTHING                       := $20398
;DONOTHING                       := $2039C
;DONOTHING                       := $203A0
;
;
;
?LCD_PAL    := 0E30200h
?LCD_CTRL   := 0E30018h
?LCD_VRAM   := 0D40000h
?LCD_BUFFER := LCD_VRAM + LCD_WIDTH*LCD_HEIGHT
?LCD_WIDTH  := 320
?LCD_HEIGHT := 240
?LCD_8BPP   := $27
?LCD_16BPP  := $2D
?TEXT_MAX_ROW    := 231
?RAM_START  := 0D00400h
?flags                   := $D00080
?namespace flags
?sys_flags              := -1
?lcd_bg_color           :=  0
?text_fg                :=  1
?text_bg                :=  2
?color_primary          :=  3
?font_spacing           :=  4
?font_data              :=  7
?lcd_x                  :=  10
?lcd_y                  :=  13
?free_RAM_ptr           :=  16
?remaining_free_RAM     :=  19
?free_VAT_entry_ptr     :=  22
?cursor_x               :=  25
?cursor_y               :=  28
?cursor_flags           :=  29
?lcd_text_fg            :=  30
?lcd_text_bg            :=  31
?cursor_color           :=  32
?free_file_RAM_ptr      :=  33
?remaining_file_RAM     :=  36
?end namespace
?bos_read_only_fs        := 1
?cursor_2nd              := 1
?flag_start             := $D00000
?sys_flags              := $D0007F
?lcd_bg_color           := $D00080
?text_fg                := $D00081
?text_bg                := $D00082
?color_primary          := $D00083
?font_spacing           := $D00084
?font_data              := $D00087
?lcd_x                  := $D0008A
?lcd_y                  := $D0008D
?free_RAM_ptr           := $D00090
?remaining_free_RAM     := $D00093
?free_VAT_entry_ptr     := $D00096
?lcd_text_fg            := $D00097
?lcd_text_bg            := $D00098
?cursor_color           := $D00099
?free_file_RAM_ptr      := $D000A0
?remaining_file_RAM     := $D000A3
?ScrapMem2              := $D000F9
?ScrapByte              := $D000FC
?ScrapWord              := $D000FD
?ScrapMem               := $D000FD
?open_files_table       := $D00100
?InputBuffer            := $D00200
?gfx_string_temp        := $D00300
?stackbot               := $D08000
?start_of_file_RAM      := $D10000
?end_of_file_RAM        := $D40000
?total_file_RAM         := end_of_file_RAM-start_of_file_RAM
?start_of_user_archive  := $0C0000 ;sector $0C, standard
?end_of_user_archive    := $3B0000 ;sector $3B, start of certificate

end namespace